jQuery.fn.extend({insertAtCaret:function(a){return this.each(function(f){if(document.selection)this.focus(),document.selection.createRange().text=a,this.focus();else if(this.selectionStart||"0"==this.selectionStart){f=this.selectionStart;var g=this.selectionEnd,r=this.scrollTop;this.value=this.value.substring(0,f)+a+this.value.substring(g,this.value.length);this.focus();this.selectionStart=f+a.length;this.selectionEnd=f+a.length;this.scrollTop=r}else this.value+=a,this.focus()})}});
(function(a){var f,g,r,l,p;function J(b){a("#page").hasClass("panel")?a("#mainspc, #pagetitle, #page").removeClass(function(a,b){return(b.match(/(^|\s)usecolor\S+/g)||[]).join(" ")}):a("#mainspc, #pagetitle, #page").removeClass();a("#mainspc, #page").addClass(b.specialcolor);K(b.section_name);a("#pagemessage").html("");b.error_message&&u(b.error_message,"Error",!0);b.page_message&&u(b.page_message,"");""!=b.ui_page_tip?(a("#learn_tip").html(b.ui_page_tip),a("#learn_tip").css("display","block")):a("#learn_tip").css("display",
        "none");a(".panelcontent").html(b.ui_learn_text);a("#page_content").html(b.content);a("#pagetitle span").html(b.ui_title);window.scrollTo(0,0);a(document).trigger("redraw")}function A(b,c,d,h,e){a.ajax({type:"POST",url:b,data:c+"data_only=1",success:function(k){k?(k.initiallogin&&(a("body").removeClass("login"),a("#loadingmask").css("width","1%")),k.template_name&&0<=k.template_name.toLowerCase().indexOf("login")&&(a("body").addClass("login"),history.pushState(1,null,cashAdminPath+"/")),"doredirect"in
    k||(k.doredirect=!1),k.doredirect?k.showerror?n(k.location,!1,k.showerror):k.showmessage?n(k.location,!1,!1,k.showmessage):n(k.location):(d&&(k.error_message=d),h&&(k.page_message=h),J(k),e||history.pushState(1,null,b),B()),a("#page_content, #ajaxloading, #logo, #hero, #learnpanel, #settingspanel, #helppanel").removeClass("loading")):A(b,c,d,h,e)},error:function(a,b,c){console.log(b+": "+c)},dataType:"json"})}function n(b,c,d,h,e){c=c?c+"&":"";a("#panel-filter").val("learn").attr("selected","selected");
    a(".modallightbox").fadeOut("fast",function(){a(".modallightbox").remove()});a(".modalbg").fadeOut("fast",function(){a(".modalbg").remove()});a("body").hasClass("settings")&&t();a("#page_content, #ajaxloading, #logo, #hero, #learnpanel, #settingspanel, #helppanel").addClass("loading");A(b,c,d,h,e)}function B(){a("body").hasClass("settings")&&t();C('<div class="icon icon-arw-up"></div>\x3c!--icon--\x3eHide','<div class="icon icon-arw-dwn"></div>\x3c!--icon--\x3eShow');x();a("input[type=date],input.date").datepicker();
    v();L();M();N();D();O();localStorage.getItem("resetadminforms")&&!a("body").hasClass("login")&&E();a("form").garlic();setTimeout(function(){a(".graph").addClass("loaded")},100)}function P(){Q();R();S();T();U();V();W();X();a(document).on("click","#tipslink",function(b){b.preventDefault();a("#pagetips").slideDown(200)});a(document).on("click","#tipscloselink",function(b){b.preventDefault();a("#pagetips").slideUp(100)});a(document).on("swipeleft","#page",function(b){a("body").removeClass("swiperight");
    a("body").hasClass("swipeleft")||a("body").hasClass("swiperight")||a("body").addClass("swipeleft")});a(document).on("swiperight","#page",function(b){a("body").removeClass("swipeleft");a("body").hasClass("swipeleft")||a("body").hasClass("swiperight")||a("body").addClass("swiperight")});a(document).on("click","#menutoggle",function(b){a("#menutoggle").toggleClass("display");a("#navmenu").toggleClass("display")});a(document).on("click","#searchbtn",function(b){a("#searchbtn").toggleClass("display");
    a("#search").toggleClass("display")});a(document).on("click","a.injectcode",function(b){b.preventDefault();a("#template")&&a("#template").insertAtCaret("{{{element_"+a(this).data("elementid")+"}}}")});a(document).on("click","#flipback",function(b){a("#flipback").parent().removeClass("display");t()});a(document).on("click",".externalsubmit",function(b){a(a(this).data("cash-target-form")).submit()});a(document).on("change","#current-campaign",function(b){a(this).closest("form").submit()});a(document).on("click",
    ".language-switch",function(a){window.location.reload()});a(document).on("change","#current-published-campaign",function(b){a(this).find(":selected").data("template")?u("","This will change your public page. Are you sure?",!0,a(this).find(":selected").data("path")):u("","Before you can publish this campaign, you need to set its page theme. Open the campaign and click the edit icon to start.",!0)});a(document).on("click",".codearea",function(a){element=this;if(document.body.createTextRange)a=document.body.createTextRange(),
    a.moveToElementText(element),a.select();else if(window.getSelection){var b=window.getSelection();a=document.createRange();a.selectNodeContents(element);b.removeAllRanges();b.addRange(a)}});a(document).on("click",".multipart-next",function(b){b.preventDefault();var c=!1;a(a(g).children(".part-"+f)[0]).find("input,select,textarea").each(function(){if(!F.element(a(this)))return c=!0,!1});c||(a(g.children(".part-"+f)[0]).hide(),f+=1,f>l?(a(a(g).children(".section.basic-information")[0]).fadeIn(),a(p).text("Finalize: "+
        a(a(g).children(".section.basic-information")[0]).data("section-name")),a(r).show()):(a(a(g).children(".part-"+f)[0]).fadeIn(),a(p).text("Step "+f+" of "+l+": "+a(a(g).children(".part-"+f)[0]).data("section-name"))))});a(document).on("click",".multipart-prev",function(b){b.preventDefault();a(g.children(".part-"+f)[0]).hide();--f;a(a(g).children(".part-"+f)[0]).fadeIn();a(p).text("Step "+f+" of "+l+": "+a(a(g).children(".part-"+f)[0]).data("section-name"))});a(document).on("click",'.store a[href^="'+
    cashAdminPath+'/elements/add"]',function(b){b.preventDefault();b.stopPropagation();jQuery.post(this.href,"data_only=1",function(b){a("div.modallightbox").html('<div class="modal-content"><div class="inner"><h4>'+b.ui_title+"</h4>"+b.content+'<a href="#" class="modalcancel"><div class="icon icon-plus"></div>\x3c!--icon--\x3e</a>\x3c!--modalcancel--\x3e</div>\x3c!--inner--\x3e</div>\x3c!--modal-content--\x3e');a(".store .modallightbox h4").css("width","62%");a(document).bind("scroll",y);G();v()},"json")});
    a(document).on("click",".revealpassword",function(b){b.preventDefault();a(b.target).prev('input[type="password"]').attr("value");a(b.target).parent().children(".needsreveal").each(function(){var b=a(this).prop("value");"password"==a(this).prop("type")?a(this).attr("type","text"):a(this).attr("type","password");a(this).attr("value",b)})});a(document).on("mouseenter",".featured-release",function(b){a("#card",this).addClass("flipped")});a(document).on("mouseleave",".featured-release",function(b){a("#card",
        this).removeClass("flipped")});a(document).on("click",".toggle",function(b){a(this).parent().toggleClass("display")});a(document).on("click",".paneltitle",function(a){t()});a(document).on("click","#settings.toggle, #settingspanel .toggle, .settings.toggle",function(b){a("body").removeClass("help").removeClass("learn");a(this).parents("body").addClass("panel").addClass("settings");a("#settingspanel .tertiarynav li a").removeClass("current");w(cashAdminPath+"/account/");a("#settingspanel .tertiarynav li a:first").addClass("current")});
    a(document).on("click","#help.toggle, #helppanel .toggle",function(b){a("body").removeClass("settings").removeClass("learn");a(this).parents("body").addClass("panel").addClass("help");a("#helppanel .tertiarynav li a").removeClass("current");a("#helppanel .tertiarynav li a:first").addClass("current")});a(document).on("change","#panel-filter",function(b){"faqs"==a("option:selected",this).attr("value")?(a("#panel-filter").val("faqs").attr("selected","selected"),a("body").removeClass("settings").removeClass("learn"),
            w(cashAdminPath+"/help/")):"learn"==a("option:selected",this).attr("value")?(a("#panel-filter").val("learn").attr("selected","selected"),a(this).parents("body").addClass("learn"),w()):"tour"==a("option:selected",this).attr("value")?(t(),z(a("option:selected",this).attr("href")),a("body").addClass("page-editor")):"http://"==a("option:selected",this).attr("value").substring(0,7)&&window.open(this.value,"_blank")});a(document).on("click",".swipehint",function(b){a(this).addClass("hide")})}function E(){for(var a=
    localStorage.length;a--;){var c=localStorage.key(a);c.match(/^garlic/i)&&localStorage.removeItem(c)}localStorage.removeItem("resetadminforms")}function w(b){a.post(b,"data_only=1",function(b){a("body").hasClass("learn")?a(".panelcontent").html(a(b.ui_learn_text)):a("body").hasClass("help")?a("#helppanel .panelcontent").html(a(b.content)):a("body").hasClass("settings")&&a("#settingspanel .panelcontent").html(a(b.content));v()})}function t(){a("body").removeClass("panel").removeClass("help").removeClass("settings").removeClass("learn")}
    function N(){if(a("#cnvs").length){var b=a("#cnvs").data("seed");if(b){var c=b.toString().split("").reverse(),b=Math.ceil((Number(c[0])+1)/2),d=Math.ceil((Number(c[1])+1)/2),h="250,56,102 106,56,250 255,124,18 250,56,56 0,207,127 250,56,102 106,56,250 255,124,18 250,56,56 0,207,127".split(" "),e=["0.9","0.6","0.3"],k=[9,24,60,980,120,180,210,240,270,330],f=new Image;f.src=cashAdminPath+"/assets/images/glitch/background/glitch"+b+".jpg";f.addEventListener("load",function(){var b=a("#cnvs").width(),
        g=a("#cnvs").height(),m=document.getElementById("cnvs").getContext("2d");m.drawImage(f,0,0);olay=new Image;olay.src=cashAdminPath+"/assets/images/glitch/artist/artist"+d+".jpg";olay.addEventListener("load",function(){m.globalCompositeOperation="screen";for(var d=0;2E3>d;)m.drawImage(olay,olay.width/(5*(Number(c[2])+1))+d/3,0,k[Number(c[2])],g,d,0,k[Number(c[2])],g),d+=k[Number(c[2])];m.save();m.globalCompositeOperation="hard-light";d=m.createLinearGradient(0,0,a("#cnvs").width()/2,0);d.addColorStop(0,
        "rgba("+h[Number(c[3])]+","+e[Number(c[3])%3]+")");d.addColorStop(1,"rgba("+h[Number(c[4])]+","+e[Number(c[3])%3]+")");m.fillStyle=d;m.fillRect(0,0,b,g);m.restore();a("#cnvs").addClass("display")},!1)},!1)}}}function W(){a(document).on("mouseenter",".elementdisplay",function(b){if(!a(this).hasClass("injectcode")){b.preventDefault();var c=a(this).attr("name");window.globaltimeout=window.setTimeout(function(){a(".gallery").stop().animate({scrollLeft:Math.floor(a(c).position().left)-34},"slow")},150);
        a(".example").removeClass("current");a(".gallery "+c).addClass("current")}});a(document).on("mouseleave",".elementdisplay",function(a){a.preventDefault();window.globaltimeout&&window.clearTimeout(window.globaltimeout)})}function D(){ZeroClipboard.config({swfPath:cashAdminPath+"/ui/default/assets/flash/ZeroClipboard.swf"});var b=new ZeroClipboard(a(".copy"));b.on("ready",function(a){b.on("aftercopy",function(a){alert("Embed Code Copied To Clipboard.")})})}function Q(){a(document).on("change",".dropdown-nav",
        function(b){var c=a(b.currentTarget);b.altKey||b.ctrlKey||b.metaKey||b.shiftKey||c.hasClass("lightboxed")||c.hasClass("needsconfirmation")||c.hasClass("showelementdetails")||c.hasClass("noajax")||c.parents("div").hasClass("inner")||a("body").hasClass("store")||a("body").hasClass("page-editor")||c.hasClass("connection")||(b.preventDefault(),b=a("option:selected").attr("value"),n(b))});a(document).on("click",'a[href^="'+cashAdminPath+'"]',function(b){var c=a(b.currentTarget);b.altKey||b.ctrlKey||b.metaKey||
    b.shiftKey||c.hasClass("lightboxed")||c.hasClass("needsconfirmation")||c.hasClass("showelementdetails")||c.hasClass("noajax")||c.parents("div").hasClass("inner")||a("body").hasClass("store")||!c.attr("href").indexOf("elements/add")||a("body").hasClass("page-editor")||c.hasClass("connection")||c.parents("div").hasClass(".page-settings-tabs")?!c.parents("div").hasClass("inner")||c.hasClass("connection")||c.hasClass("lightboxed")||c.hasClass("needsconfirmation")?c.hasClass("store")?(b.preventDefault(),
                    a("body").addClass("store")):c.hasClass("page-editor")&&(b.preventDefault(),a("body").addClass("page-editor")):(b.preventDefault(),a(".panelcontent").removeClass("display"),b=c.attr("href"),w(b),a(".panelcontent").addClass("display"),a(".inner a").removeClass("current"),c.addClass("current"),c.blur()):(b.preventDefault(),b=c.attr("href"),E(),n(b),c.blur())})}function H(b){b=a(b);var c=b.attr("action");""==c&&(c=location.pathname);var d=a(b).serialize();b.hasClass("returntocurrentroute")&&(d+="&forceroute="+
        location.pathname.replace(cashAdminPath,""));n(c,d)}function v(){a("form").each(function(){var b=a(this);b.hasClass("novalidate")?b.submit(function(a){H(b);a.preventDefault()}):F=b.validate({errorClass:"invalid",errorElement:"span",highlight:function(b,d){a(b).addClass(d);a(b.form).find("label[for="+b.id+"]").addClass(d)},unhighlight:function(b,d){a(b).removeClass(d);a(b.form).find("label[for="+b.id+"]").removeClass(d)},submitHandler:function(b){1>a(b).attr("action").toLowerCase().indexOf("s3.amazonaws")&&
        !a(b).hasClass("noajax")?H(b):b.submit()}})})}function K(b){b!=currentSection&&(currentSection=b,a("div.mainnavmenu li").each(function(c){a(this).removeClass("current");a(this).hasClass(b+"nav")&&a(this).addClass("current")}),a("div.mainnavmenu a").each(function(c){a(this).hasClass(b+"nav")&&a(this).parent().addClass("current")}))}function M(){a("#connection_id").each(function(){if(0<this.value){var b=a(".file-upload-trigger").data("upload-endpoint")+this.value;a(".upload-corral").addClass("show").find(".file-upload-trigger").data("upload-endpoint",
        b)}})}function R(){a(document).on("click","a[data-publicize-endpoint]",function(b){b.preventDefault();a.ajax({url:a(this).data("publicize-endpoint"),dataType:"json"}).done(function(a){}).complete(function(b){b=a.parseJSON(b.responseText);b.success&&(a("#asset_location").val(b.location),a("#connection_id").val("0"),a(".upload-corral").removeClass("show"))})});a(document).on("change","#connection_id",function(b){console.log(this.value);if(0<this.value){b="private";void 0!==a(".file-upload-trigger").data("upload-acl")&&
    (b="public-read");var c=a(".file-upload-trigger").data("upload-endpoint")+this.value,d=a(".upload-corral").addClass("show").find(".file-upload-trigger");d.data("upload-endpoint",c);a.ajax({url:c,dataType:"json",data:"data_only=1&acl="+b}).done(function(a){d.parents(".drawer").find(".drawercontent").html(a.content)})}else a(".upload-corral").removeClass("show")});a(document).on("click",".file-upload-trigger",function(b){b.preventDefault();a(this);a(this).data("upload-endpoint");b=a("#connection_id").val();
        console.log(b);if("0"==b)return alert("Sorry, can't upload without a connection. Have you tried a normal link?"),!1})}function L(){a(".autocomplete").each(function(){var b=a(this).data("cash-endpoint-url");a(this).autocomplete({source:function(c,d){a.ajax({url:b+"/"+c.term,dataType:"json",error:function(a){},success:function(b){d(a.map(b,function(a){return{label:a.displayString,value:a.displayString,id:a.id}}))}})},select:function(b,d){a("#event_venue").val(d.item.id)},minLength:2})})}function S(){a(document).on("click",
        ".modalcancel, .modalskip",function(a){a.preventDefault();I()});a(document).on("click",".page-description",function(b){a("body").hasClass("settings")||a("body").hasClass("help")?(a("body").removeClass("settings").removeClass("help"),a("body").addClass("learn"),a(this).addClass("display")):a("body").hasClass("learn")?(a("body").removeClass("panel"),window.globaltimeout=window.setTimeout(function(){a("body").removeClass("learn").removeClass("settings").removeClass("help")},250)):(a(this).parents("body").addClass("learn").addClass("panel"),
                a(this).addClass("display"))});a(document).keyup(function(a){27===a.keyCode&&I()})}function I(){a(".modallightbox").fadeOut("fast",function(){a(".modallightbox").remove();openlightbox=!1});a(".modalbg").fadeOut("fast",function(){a(".modalbg").remove();a("body").removeClass("store page-editor")});a(document).unbind("scroll",y)}function U(){a(document).on("click",".needsconfirmation",function(b){b.preventDefault();a(".modallightbox").remove();u("","Are you sure?",!0,a(this).attr("href"));this.blur()});
        a(document).on("click",".lightboxed",function(b){b.preventDefault();a(this).hasClass("closepanel")&&t();a(this).hasClass("returntocurrentroute")?z(a(this).attr("href"),!0):z(a(this).attr("href"));this.blur()})}function O(){a("div.switchblock").each(function(){var b=a(a(this).data("watch"));if(b){var c=a(this).data("change");b.change(function(){a(c).addClass("show")});var d=b.val(),h=a(this).data("special");if(h&&"object"===typeof h)if(h.val){if(d==h.val&&a(h.target))return a(h.target).addClass("show"),
        b.change(function(){a(h.target).removeClass("show")}),!0}else a.each(h,function(c,e){if(d==e.val&&a(e.target))return a(e.target).addClass("show"),b.change(function(){a(e.target).removeClass("show")}),!0});var e=a(this).data("default");a(e).addClass("show");e!==c&&b.change(function(){a(e).removeClass("show")})}})}function u(b,c,d,h){c='<div class="modalbg"><div class="modaldialog"><div class="pure-u-1"><p><span class="big">'+c+"</span></p><br />";b&&(c+='<p><span class="big">'+b+"</span></p>");d&&
    h&&(c+='<input type="button" class="button modalcancel" value="Cancel" /><input type="button" class="button modalyes" value="Yes do it" />');d&&!h&&(c+='<input type="button" class="button modalyes" value="OK" />');c=a(c+"</div>\x3c!--pure--\x3e</div></div>");c.hide();a("body").append(c);if(d)a(".modalyes").on("click",function(b){b.preventDefault();h&&n(h,"modalconfirm=1&redirectto="+location.pathname.replace(cashAdminPath,""));a(".modalbg").remove()});else window.setTimeout(function(){a(".modalbg").remove()},
        2E3);a(".modalbg").fadeIn("fast")}function y(){a(document).scrollTop()<q&&(q=a(document).scrollTop(),0>q&&(q=0),a(".modallightbox").css("top",q+"px"))}function z(b,c){jQuery.post(b,"data_only=1",function(b){var d="";c&&(d="returntocurrentroute ");var e=a(".modallightbox").length;e?(b="<h4>"+b.ui_title+"</h4>"+b.content+'<a href="#" class="modalcancel"><div class="icon icon-plus"></div>\x3c!--icon--\x3e</a>',a(".modallightbox").html(b)):(b='<div class="modalbg"></div><div class="modallightbox '+d+
            '"><div class="modal-content"><div class="inner"><h4>'+b.ui_title+"</h4>"+b.content+'<div class="tar" style="position:relative;z-index:9876;"><a href="#" class="modalcancel"><div class="icon icon-plus"></div>\x3c!--icon--\x3e</a></div></div>\x3c!--inner--\x3e</div>\x3c!--modal-content--\x3e</div>\x3c!--modallightbox--\x3e',b=a(b),b.hide(),a("body").append(b),C('<i class="icon icon-chevron-sign-up"></i>Hide','<i class="icon icon-chevron-sign-down"></i>Show'),q=a(document).scrollTop(),a(".modallightbox").css("top",
            q+"px"));D();a(document).bind("scroll",y);G();e?(v(),x()):(a(".modalbg").fadeIn("fast"),a(".modallightbox").fadeIn("fast",function(){v();x()}))},"json")}function G(){f=1;a(".modallightbox form.multipart").each(function(){g=a(this);r=a(this).children("input[type=submit]")[0];l=a(this).data("parts");a(".modallightbox form.multipart div.section").each(function(){a(this).hasClass("part-"+f)&&l||a(this).hide()});p=a('<h5 class="steps">Step 1 of '+l+": "+a(a(g).children(".part-"+f)[0]).data("section-name")+
        "</h5>");l?a(r).hide():(a(a(g).children(".section.basic-information")[0]).fadeIn(),a(p).text("Finalize: "+a(a(g).children(".section.basic-information")[0]).data("section-name")));p.insertBefore(a(this));for(var b=1;b<=l;b++)Y(b)})}function Y(b){var c=a('<div class="row"></div>'),d=a('<div class="twelve columns"></div>');a(c).append(d);b<=l&&(1<b&&a(d).append(a('<button class="button multipart-prev">Previous</button> ')),a(d).append('<button class="button multipart-next">Next</button>'),a(a(g).children(".part-"+
        b)[0]).append(c))}function C(b,c,d,h){a(".drawer-trigger").on("click",function(){a(document.body).animate({scrollTop:a("#settings-drawer").offset().top},1E3)});a(".drawer").each(function(){var e,k,f,g;e=a(this);0==e.find(".drawerhandleaction").length&&(e.hasClass("noprefix")?(a.data(e,"labelTextHidden",""),a.data(e,"labelTextVisible","")):(a.data(e,"labelTextHidden",c),a.data(e,"labelTextVisible",b)),k=e.find(".drawerhandle"),f=e.find(".drawercontent"),drawerNav=e.find(".page-settings-tabs"),drawerNavLink=
        e.find(".page-settings-tabs li"),drawerSection=e.find(".pref-inner"),g=a('<span class="drawerhandleaction">'+a.data(e,"labelTextHidden")+" </span>"),d&&g.addClass(h),e.hasClass("multipart")&&(drawerNavLink.eq(0).addClass("current"),drawerSection.eq(0).addClass("active"),drawerNavLink.on("click",function(){var a=drawerNavLink.index(this);drawerNavLink.removeClass("current")&&drawerSection.removeClass("active");drawerNavLink.eq(a).addClass("current")&&drawerSection.eq(a).addClass("active")})),e.hasClass("defaultopen")||
    e.hasClass("open")||f.hide(),k.prepend(g),a(this).find(".drawerhandle").add(".drawer-trigger").on("click",function(){e.addClass("open");a(this).blur();f.is(":hidden")?f.slideDown(200,function(){g.html(a.data(e,"labelTextVisible")+" ");d&&(g.removeClass(),g.addClass(d));e.hasClass("multipart")&&(drawerNavLink.eq(0).addClass("current"),drawerSection.eq(0).addClass("active"))}):(e.removeClass("open"),e.hasClass("multipart")&&(drawerNavLink.removeClass("current"),drawerSection.removeClass("active")),
            f.slideUp(200,function(){f.hide();g.html(a.data(e,"labelTextHidden")+" ");h&&(g.removeClass(),g.addClass(h))}))}))})}function x(){a("div.scalar").each(function(b){a(this).hide();b=a('<a href="#" class="clonebutton"><i class="icon icon-circle-plus"></i>'+a(this).data("actiontext")+"</a>");var c=a(this).html(),d=0+Number(a(this).data("clonecount")),f=a(this).data("name"),e=a(this).nextAll("div.clonedscalar");e.length?e.last().after(b):a(this).after(b);b.click(function(b){b.preventDefault();b=a('<div class="clonedscalar">'+
        c+"</div>");b.find("*").each(function(){a(this).attr("name")&&(a(this).attr("name",a(this).attr("name")+"-clone-"+f+"-"+d),a(this).attr("id",a(this).attr("id")+"-clone-"+f+"-"+d))});d++;var e=a('<a href="#" class="removescalar"><div class="icon icon-plus"></div></a>');b.append(e);a(this).before(b)})})}function V(){a(document).on("click","a.removescalar",function(b){b.preventDefault();var c=a(this).parent(".clonedscalar");c.fadeOut(400,function(){c.detach()})})}function T(){a(document).on("keydown",
        "textarea.taller",function(b){if(9===b.keyCode){b=this.selectionStart;end=this.selectionEnd;var c=a(this);c.val(c.val().substring(0,b)+"\t"+c.val().substring(end));this.selectionStart=this.selectionEnd=b+1;return!1}})}function X(){a(document).on("input","form.add_variants #primary_variant_name",function(b){var c=a("#primary_variant_name").val();c?(a("form.add_variants div.variant1").addClass("pure-u-md-1-2"),a("form.add_variants div.variant2").css("display","inline-block"),a("form.add_variants .findreplace").each(function(){-1!==
        a(this).data("startvalue").indexOf("[primary_variant_name]")&&a(this).text(a(this).data("startvalue").replace("[primary_variant_name]",c))})):(a("form.add_variants div.variant1").removeClass("pure-u-md-1-2"),a("form.add_variants div.variant2").css("display","none"))});a(document).on("input","form.add_variants #secondary_variant_name",function(b){var c=a("#secondary_variant_name").val();c?(a("form.add_variants div.variant1-options").addClass("pure-u-md-1-2"),a("form.add_variants div.variant2-options").css("display",
            "inline-block"),a("form.add_variants .findreplace").each(function(){-1!==a(this).data("startvalue").indexOf("[secondary_variant_name]")&&a(this).text(a(this).data("startvalue").replace("[secondary_variant_name]",c))})):(a("form.add_variants div.variant1-options").removeClass("pure-u-md-1-2"),a("form.add_variants div.variant2-options").css("display","none"))})}a(document).ready(function(){P();B();FastClick.attach(document.body);window.globaltimeout=!1;history.pushState(1,null,location.pathname);window.addEventListener("popstate",
        function(a){a.state&&n(location.pathname,null,null,null,!0)},!1)});var F,q=0;g=null;f=1;l=0;p=r=null})(jQuery);